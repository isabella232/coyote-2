<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="592.01" height="519.168" stroke-linecap="round" font-family="Segoe UI" font-size="12"><rect width="592.01" height="519.168" fill="#1E1E1E"/><g transform="translate(20,20)"><g id="Microsoft.Coyote.Samples.CloudMessaging.Server"><rect width="552.01" height="479.168" fill="#EEE" stroke="#A5A6A9" stroke-width="1" rx="5" ry="5"/><text x="144" y="17.95" fill="#000">Microsoft.Coyote.Samples.CloudMessaging.Server</text><rect width="542.01" height="446.208" x="5" y="27.96" fill="#1E1E1E" stroke="#A5A6A9" stroke-width="1"/><g id="944b151a-5736-40d5-8851-dff5e6bb6c201-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Init"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 164.12,81.9200000000001 L 164.12,104.6075"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 164.12,113.6075 L 168.12,103.6075 C 165.453333333333,104.6075 162.786666666666,104.6075 160.12,103.6075 z"/></g><g id="HandlesClientRequestEvent-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Leader"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 322.900976220276,299.3675 L 225.350705957414,342.668981077793"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 217.124706822916,346.320410693606 L 227.887563468275,345.919266291368 C 225.89165849309,343.887647616237 224.809753421738,341.450314539349 224.641848254219,338.607267060703 z"/></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Follower"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 177.417678652708,265.4275 L 168.62,256.4375 C 155.562132156684,243.094181092203 150.803730043609,230.854691126527 154.344793660774,219.719030102974"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 157.983737486095,211.4875 L 150.282008745528,219.01633619205 C 153.125307719593,219.179927314037 155.564279601956,220.25813289191 157.598924392616,222.250952925669 z"/><text x="104.592" y="239.438" fill="#A0A0A0">demoted</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Leader"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 190.12,291.3875 L 190.12,336.327500000001"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 190.12,345.327500000001 L 194.12,335.327500000001 C 191.453333333333,336.327500000001 188.786666666666,336.327500000001 186.12,335.327500000001 z"/><text x="101.213" y="327.318" fill="#A0A0A0">majority of votes</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Follower-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 188.855153874675,211.4875 L 198.383333333333,216.4875 C 221.225555555555,228.474166666667 225.558888888889,241.790833333334 211.383333333333,256.4375 L 208.941600733085,258.960381261677"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 202.682497344864,265.4275 L 212.511331659919,261.023636241073 C 209.899692398021,259.88765583771 207.983509068148,258.033106685645 206.762781670299,255.459988784877 z"/><text x="220.026" y="239.438" fill="#A0A0A0">timeout</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Init-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Follower"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 164.12,139.5675 L 164.12,176.5275"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 164.12,185.5275 L 168.12,175.5275 C 165.453333333333,176.5275 162.786666666666,176.5275 160.12,175.5275 z"/><text x="30.977" y="167.518" fill="#A0A0A0">NotifyJoinedServiceEvent</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Leader-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Follower"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 162.345,350.120704918033 L 129.12,340.327500000001 C 88.4533333333332,328.340833333334 68.1199999999998,307.700833333334 68.1199999999998,278.4075 C 68.1199999999998,249.114166666667 84.1199999999998,228.474166666667 116.12,216.4875 L 123.950089066016,213.554479137355"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 132.378205638246,210.397447138007 L 121.610506336059,210.159430882958 C 123.482380621669,212.305869274802 124.417797510364,214.803088999907 124.416757002145,217.651090058273 z"/><text x="20" y="283.378" fill="#A0A0A0">demoted</text></g><g id="SendsVoteRequestEvents-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 305.12,211.4875 L 305.12,216.4875 C 305.12,228.474166666667 285.953333333333,241.790833333334 247.62,256.4375 L 232.496894863723,262.215841214678"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 224.089682617408,265.428127354705 L 234.858712286659,265.595459308593 C 232.97278910669,263.461354140058 232.021000620756,260.970328289298 232.003346828857,258.122381756313 z"/></g><g id="944b151a-5736-40d5-8851-dff5e6bb6c201"><rect width="241.843" height="41.92" x="43.198" y="40" fill="#FFFACD" stroke="#E5C365" stroke-width="1" rx="2" ry="2"/><g><text x="53.198" y="57.95" fill="#3D3D3D">Start state where all events are deferred</text><text x="53.198" y="73.91" fill="#3D3D3D">until we get the NotifyJoinedServiceEvent.</text></g></g><g id="AnyStateExceptInitCanHandleAppendLogEntriesResponseEvent"><rect width="241.42" height="57.88" x="20" y="401.288" fill="#FFFACD" stroke="#E5C365" stroke-width="1" rx="2" ry="2"/><g><text x="30" y="419.238" fill="#3D3D3D">Any state except Init can handle</text><text x="30" y="435.198" fill="#3D3D3D">AppendLogEntriesRequestEvents, sending</text><text x="30" y="451.158" fill="#3D3D3D">back AppendLogEntriesResponseEvents</text></g></g><g id="HandlesClientRequestEvent"><rect width="224.627" height="41.92" x="257.807" y="257.448" fill="#FFFACD" stroke="#E5C365" stroke-width="1" rx="2" ry="2"/><g><text x="267.807" y="275.398" fill="#3D3D3D">Handles ClientRequestEvent and sends</text><text x="267.807" y="291.358" fill="#3D3D3D">AppendLogEntriesRequestEvent</text></g></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate"><rect width="73.817" height="25.96" x="153.212" y="265.428" fill="#FFF" stroke="#A5A6A9" stroke-width="1" rx="3" ry="3"/><text x="163.212" y="283.378" fill="#3D3D3D">Candidate</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Follower"><rect width="64.857" height="25.96" x="131.692" y="185.528" fill="#FFF" stroke="#A5A6A9" stroke-width="1" rx="3" ry="3"/><text x="141.692" y="203.478" fill="#3D3D3D">Follower</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Init"><rect width="50" height="25.96" x="139.12" y="113.608" fill="#FFF" stroke="#A5A6A9" stroke-width="1" rx="3" ry="3"/><text x="155.12" y="131.558" fill="#3D3D3D">Init</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Leader"><rect width="55.55" height="25.96" x="162.345" y="345.328" fill="#FFF" stroke="#A5A6A9" stroke-width="1" rx="3" ry="3"/><text x="172.345" y="363.278" fill="#3D3D3D">Leader</text></g><g id="SendsVoteRequestEvents"><rect width="155.39" height="25.96" x="227.425" y="185.528" fill="#FFFACD" stroke="#E5C365" stroke-width="1" rx="2" ry="2"/><text x="237.425" y="203.478" fill="#3D3D3D">Sends VoteRequestEvents</text></g><g id="SendsVoteResponseEvents"><rect width="240.59" height="41.92" x="291.42" y="401.288" fill="#FFFACD" stroke="#E5C365" stroke-width="1" rx="2" ry="2"/><g><text x="301.42" y="419.238" fill="#3D3D3D">Any state handles VoteRequestEvents and</text><text x="301.42" y="435.198" fill="#3D3D3D">sends back VoteResponseEvents.</text></g></g></g></g></svg>